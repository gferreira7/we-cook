{{#with video }}
<div class="stream-area">
                    <div class="video-stream">
                        <video videoId="{{_id}}" class="video-js vjs-default-skin anim" width="640px" height="267px"
                            controls preload="none"
                            poster='{{thumbnail}}'
                            data-setup='{ "aspectRatio":"940:620", "playbackRates": [1, 1.5, 2] }'>
                            <source
                                src="{{url}}"
                                type='video/mp4' />
                            <source
                                src="{{url}}"
                                type='video/webm' />
                        </video>
                        <div class="video-detail">
                            <div class="video-content">
                                <div class="video-p-wrapper anim" style="--delay: .1s">
                                    <div class="author-img__wrapper video-author video-p">
                                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3"
                                            stroke-linecap="round" stroke-linejoin="round"
                                            class="feather feather-check">
                                            <path d="M20 6L9 17l-5-5" />
                                        </svg>
                                      
                                        <img class="author-img"
                                            src="{{author.profilePic}}" />
                                    </div>
                                    <div class="video-p-detail">
                                        <div class="video-p-name">{{author.channelName}}</div>
                                        <div class="video-p-sub">{{author.subscribers}} subscribers</div>
                                         <div class="video-p-sub" >{{views}} Views</div>
                                    </div>
                                  
                                    <div class="button-wrapper">
                                         <a href="/profile/{{_id}}/manageVideos">
                                            <button class="like">
                                            <svg viewBox="0 0 24 24" fill="currentColor"
                                                xmlns="http://www.w3.org/2000/svg">
                                                <path
                                                    d="M21.435 2.582a1.933 1.933 0 00-1.93-.503L3.408 6.759a1.92 1.92 0 00-1.384 1.522c-.142.75.355 1.704 1.003 2.102l5.033 3.094a1.304 1.304 0 001.61-.194l5.763-5.799a.734.734 0 011.06 0c.29.292.29.765 0 1.067l-5.773 5.8c-.428.43-.508 1.1-.193 1.62l3.075 5.083c.36.604.98.946 1.66.946.08 0 .17 0 .251-.01.78-.1 1.4-.634 1.63-1.39l4.773-16.075c.21-.685.02-1.43-.48-1.943z" />
                                            </svg>
                                            Edit Video
                                        </button>
                                         </a>
                                        <button class="like">
                                            <svg viewBox="0 0 24 24" fill="currentColor"
                                                xmlns="http://www.w3.org/2000/svg">
                                                <path
                                                    d="M21.435 2.582a1.933 1.933 0 00-1.93-.503L3.408 6.759a1.92 1.92 0 00-1.384 1.522c-.142.75.355 1.704 1.003 2.102l5.033 3.094a1.304 1.304 0 001.61-.194l5.763-5.799a.734.734 0 011.06 0c.29.292.29.765 0 1.067l-5.773 5.8c-.428.43-.508 1.1-.193 1.62l3.075 5.083c.36.604.98.946 1.66.946.08 0 .17 0 .251-.01.78-.1 1.4-.634 1.63-1.39l4.773-16.075c.21-.685.02-1.43-.48-1.943z" />
                                            </svg>
                                            Share
                                        </button>
                                        <button like-btn class="like red">
                                            <svg viewBox="0 0 24 24" fill="currentColor"
                                                xmlns="http://www.w3.org/2000/svg">
                                                <path fill-rule="evenodd" clip-rule="evenodd"
                                                    d="M15.85 2.5c.63 0 1.26.09 1.86.29 3.69 1.2 5.02 5.25 3.91 8.79a12.728 12.728 0 01-3.01 4.81 38.456 38.456 0 01-6.33 4.96l-.25.15-.26-.16a38.093 38.093 0 01-6.37-4.96 12.933 12.933 0 01-3.01-4.8c-1.13-3.54.2-7.59 3.93-8.81.29-.1.59-.17.89-.21h.12c.28-.04.56-.06.84-.06h.11c.63.02 1.24.13 1.83.33h.06c.04.02.07.04.09.06.22.07.43.15.63.26l.38.17c.092.05.195.125.284.19.056.04.107.077.146.1l.05.03c.085.05.175.102.25.16a6.263 6.263 0 013.85-1.3zm2.66 7.2c.41-.01.76-.34.79-.76v-.12a3.3 3.3 0 00-2.11-3.16.8.8 0 00-1.01.5c-.14.42.08.88.5 1.03.64.24 1.07.87 1.07 1.57v.03a.86.86 0 00.19.62c.14.17.35.27.57.29z" />
                                            </svg>
                                            <span like-count>{{likes.length}}</span> Liked
                                        </button>
                                        <button dislike-btn class="like red">
                                            <svg viewBox="0 0 24 24" fill="currentColor"
                                                xmlns="http://www.w3.org/2000/svg">
                                                <path fill-rule="evenodd" clip-rule="evenodd"
                                                    d="M15.85 2.5c.63 0 1.26.09 1.86.29 3.69 1.2 5.02 5.25 3.91 8.79a12.728 12.728 0 01-3.01 4.81 38.456 38.456 0 01-6.33 4.96l-.25.15-.26-.16a38.093 38.093 0 01-6.37-4.96 12.933 12.933 0 01-3.01-4.8c-1.13-3.54.2-7.59 3.93-8.81.29-.1.59-.17.89-.21h.12c.28-.04.56-.06.84-.06h.11c.63.02 1.24.13 1.83.33h.06c.04.02.07.04.09.06.22.07.43.15.63.26l.38.17c.092.05.195.125.284.19.056.04.107.077.146.1l.05.03c.085.05.175.102.25.16a6.263 6.263 0 013.85-1.3zm2.66 7.2c.41-.01.76-.34.79-.76v-.12a3.3 3.3 0 00-2.11-3.16.8.8 0 00-1.01.5c-.14.42.08.88.5 1.03.64.24 1.07.87 1.07 1.57v.03a.86.86 0 00.19.62c.14.17.35.27.57.29z" />
                                            </svg>
                                            <span dislike-count>{{dislikes.length}}</span>Disliked                                            
                                        </button>
                                    </div>
                                </div>
                                <div class="video-p-title anim" style="--delay: .2s">{{title}}</div>
                                <div class="video-p-subtitle anim" style="--delay: .3s"> {{description}}</div>
                              <div class="video-p-subtitle anim" style="--delay: .4s">
                                
                              </div>
                            </div>
                        </div>
                    </div>
                    <div class="chat-stream">
                        <div class="chat">
                            <div class="chat-header anim">Recipe<span>
                                    <span cookTime={{recipe.cookTime}} class="p-2">...</span>
                                    <img src="/images/clock.png" alt="cooking-time" style="width:20px">
                                </span>
                            </div>
                            <div class="message-container">
                                <div class="message anim d-flex flex-column justify-content-center align-items-start" style="--delay: .1s">
                                    {{#each recipe.ingredients}}
                                    <div class="author-img__wrapper video-author video-p d-flex justify-content-between w-100 px-4">
                                        <div>
                                        {{ingredient}} - {{quantity}} {{unit}}
                                        </div>
                                        <div>
                                            Calories
                                        </div>
                                    </div>
                                    {{/each}}
                                </div>                                  
                                <div class="message anim d-flex flex-column justify-content-center align-items-start" style="--delay: .1s">
                                    {{#each recipe.steps}}
                                    <div class="author-img__wrapper video-author video-p d-flex justify-content-between w-100 px-4">
                                        <div>
                                        {{this}}
                                        </div>
                                    </div>
                                    {{/each}}
                                </div>
                                <div data-bring-import data-bring-language="en" style="display:none">
                                    <a href="https://www.getbring.com">Bring! Einkaufsliste App f&uuml;r iPhone und Android</a>
                                </div>             
                            </div>
                            
                        </div>
                        <div class="chat-vid__container">
                            <div class="chat-vid__title anim" style="--delay: .3s">Related Videos</div>
                            <div class="chat-vid anim" style="--delay: .4s">
                                <div class="chat-vid__wrapper">
                                    <img class="chat-vid__img"
                                        src="https://cdn.nohat.cc/thumb/f/720/3b55eddcfffa4e87897d.jpg" />
                                    <div class="chat-vid__content">
                                        <div class="chat-vid__name">Prepare for your first skateboard jump</div>
                                        <div class="chat-vid__by">Jordan Wise</div>
                                        <div class="chat-vid__info">125.908 views <span class="seperate"></span>2 days
                                            ago</div>
                                    </div>
                                </div>
                            </div>
                            <div class="chat-vid anim" style="--delay: .5s">
                                <div class="chat-vid__wrapper">
                                    <img class="chat-vid__img"
                                        src="https://iamaround.it/wp-content/uploads/2015/02/pexels-photo-4663818.jpeg" />
                                    <div class="chat-vid__content">
                                        <div class="chat-vid__name">Prepare for your first skateboard jump</div>
                                        <div class="chat-vid__by">Jordan Wise</div>
                                        <div class="chat-vid__info">125.908 views <span class="seperate"></span>2 days
                                            ago</div>
                                    </div>
                                </div>
                            </div>
                            <div class="chat-vid__button anim" style="--delay: .6s">See All related videos (32)</div>
                        </div>
                    </div>
                </div>




{{/with }}



<script async="async" src="//platform.getbring.com/widgets/import.js"></script>
<script src='/js/watch.js'></script>
<script>

window.onload = () => {     
    
    /*Convert # of cooking time minutes to readable format */
    /*Update the DOM */
    let minutes = parseInt(cookTimeElement.getAttribute('cookTime'))
    if(minutes>=60){ 
        const hours = Math.floor(minutes/60) 
        minutes = Math.floor(minutes%60)
        cookTimeElement.innerHTML = `${hours}h${minutes}m`
    }
    //once video starts count minViewTime Seconds until it counts as a view
    video.addEventListener('play', function() {
        video.hasSentViewCount = false
    })
    video.addEventListener('timeupdate', () => {
        if(video.currentTime >= minViewTime && !video.hasSentViewCount){
           video.hasSentViewCount = updateViews(videoId)
        }
    })

    /*user can only like OR dislike a video*/
    /*check in DB and update the DOM*/
    likeButton.onclick = () =>{
        updateLikesAndDislikes(videoId, 'like')
        dislikeCount.innerHTML = response.data.dislikes.length
        likeCount.innerHTML = response.data.likes.length
    }
    dislikeButton.onclick = () =>{
        updateLikesAndDislikes(videoId, 'dislike')
        dislikeCount.innerHTML = response.data.dislikes.length
        likeCount.innerHTML = response.data.likes.length
    }

  }
</script>
