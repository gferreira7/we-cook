{{> dashboard }}
{{#with userProfile}}
<div channelName="{{channelName}}">
    <div class='author-info'>{{description}}</div>
{{/with}}

  <div class="main-header anim" style="--delay: 0.8s font-weight:700;">
    My Videos
  </div>

  {{> videos/uploadedVideos}}

  <a href="/profile/{{userProfile._id}}/uploadedVideos">
    <button class="btn btn-primary btn" type="button">See All</button> 
  </a>
  <div class="anim" style="--delay: 0.5s">
    Liked Videos
  </div>
  {{> videos/likedVideos}}
  <a href="/profile/{{userProfile._id}}/likedVideos">
    <button class="btn btn-primary btn" type="button">See All</button> 
  </a>

</div>

<script src='/js/subscribe.js'></script>


<script>

    window.onload = () => {

    let subBtn = document.querySelector("button[subBtn]");
    let channelName = document.querySelector("div[channelName]").getAttribute('channelName')
    
    updateSubscribe(channelName).then(response => {
        if(response.data.subbed)
        {
          subBtn.classList.remove('red')
          subBtn.classList.add('green')
          subBtn.textContent= "Subscribed";

        } else{
          subBtn.classList.remove('green')
          subBtn.classList.add('red')
          subBtn.textContent= "Subscribe";
        }
      })
   

   subBtn.onclick = () => {
      updateSubscribe(channelName).then(response => {
        if(response.data.subbed)
        {
          subBtn.classList.remove('red')
          subBtn.classList.add('green')
          subBtn.textContent= "Subscribed";

        } else{
          subBtn.classList.remove('green')
          subBtn.classList.add('red')
          subBtn.textContent= "Subscribe";
        }
      })
  }
}
</script>